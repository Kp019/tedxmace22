<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Register</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/T icon.jpg" rel="icon">
  <link href="assets/img/T icon.jpg" rel="apple-touch-icon">

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  <link href="assets/css/form.css" rel="stylesheet">
  <!-- =======================================================
  * Template Name: Day - v4.9.1
  * Template URL: https://bootstrapmade.com/day-multipurpose-html-template-for-free/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>
  <!-- ======= Header ======= -->
  <header id="header" class="d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">

      <!--****add logo*****-->
      <!-- <h1 class="logo"><a href="index.html">TedX Mace</a></h1>  -->
      <!-- Uncomment below if you prefer to use an image logo -->
      <a href="index.html" class="logo"><img src="assets/img/logo white.png" alt="" class="img-fluid"></a>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="index.html">Home</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <!--from-->
  <div class="container">

    <form class="row g-3 mt-5 p-md-5 register" id="form">
      <h1 class="m-3 mt-5 register-title"><strong>Register Now</strong></h1>

      <div class="col-md-4 m-3 txt_field">
        <label for="inputname4" class="form-label">First Name</label>
        <input type="text" class="form-control" id="firstname">
      </div>
      <div class="col-md-4 m-3 txt_field">
        <label for="inputname4" class="form-label">Last Name</label>
        <input type="text" class="form-control" id="lastname">
      </div>
      <div class="col-md-4 m-3 txt_field">
        <label for="inputEmail4" class="form-label">Email</label>
        <input type="email" class="form-control" id="email">
      </div>
      <div class="col-md-4 m-3 txt_field">
        <label for="inputIos2" class="form-label">Institution of Study</label>
        <input type="text" class="form-control" id="Ios">
      </div>
      <div class="col-md-4 m-3 txt_field">
        <label for="inputhelp2" class="form-label">Anything we can help you out with?</label>
        <input type="text" class="form-control" id="help">
      </div>
      <div class="col-md-4 m-3 txt_field">
        <label for="inputphno2" class="form-label">phone number</label>
        <input type="text" class="form-control" id="phno">
      </div>
      
      <div class="col-md-4 m-3">
        <label for="inputState" class="form-label">Food Preference</label>
        <select id="foodpref" class="form-select">
          <option>Veg</option>
          <option selected>Non-Veg</option>
        </select>
      </div>
      
      <div class="col-md-4 m-3 txt_field">
        <label for="inputphno2" class="form-label" >Enter your class (If you are a MACEian)</label>
        <input type="text" class="form-control" id="maceian-cls">
      </div>
     

      
      <!-- <div class="col-md-4 m-3 txt_field" id="text" style="display: none;">
        <label for="inputclass"  class="form-label">Class (S1EEEA/S2ECB/S3R)</label>
        <input type="text"  class="form-control" id="class">
      </div> -->
      
      <div class=" register-btn">
        <button type="submit" class="btn btn-danger">Submit</button>
        <button onclick="window.location.href='payment-status.html'" class="btn btn-danger mx-3">Check Payment Status</button>
      </div>

    </form>

  </div>



  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-4 col-md-6">
            <div class="footer-info">
              <h3>TEDx MACE</h3>
              <p>Mar Athanasius College of Engineering<br>
                College Road <br>
                Kothamangalam 686666, Kerala<br><br>
                <strong>Phone</strong> <br>Devadarsh: +91 8129923207<br>Fretiz Paul: +91 90618 46934<br>
                <strong>Email</strong> <br> tedxmace@gmail.com<br>
              </p>
              <div class="social-links mt-3">
                <a href="https://twitter.com/TEDxMACE?t=SOD9M4ypeSgwzda5SgfySA&s=09" class="twitter"><i
                    class="bx bxl-twitter"></i></a>
                <a href="https://m.facebook.com/tedxmace/" class="facebook"><i class="bx bxl-facebook"></i></a>
                <a href="https://instagram.com/tedxmace?igshid=YmMyMTA2M2Y=" class="instagram"><i
                    class="bx bxl-instagram"></i></a>
              </div>
            </div>
          </div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#hero">Home</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#about">About us</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#services">Why Join Us</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#team">Speakers</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#faq">FAQ</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Important Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="https://www.ted.com/" target="_blank">Ted</a></li>
              <li><i class="bx bx-chevron-right"></i> <a
                  href="https://www.ted.com/about/programs-initiatives/tedx-program" target="_blank">TEDx</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="https://www.mace.ac.in/" target="_blank">MACE</a></li>
            </ul>
          </div>

          <div class="col-lg-4 col-md-6 footer-newsletter">

            <p> &copy; Copyright <strong><span>TEDxMACE</span></strong>. All Rights Reserved</p>
            Made with love by<br><a href="https://www.linkedin.com/in/krishnaprasad-r-6867bb203/"
              target="_blank">Krishnaprasad</a>,
            <a href="https://www.linkedin.com/in/naeema-ziyad/" target="_blank">Naeema Ziyad</a> ,
            <a href="https://www.linkedin.com/in/abhinav-unnikrishnan/" target="_blank">Abhinav Unnikrishnan</a></br>

          </div>

        </div>
      </div>
    </div>

  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    const form = document.getElementById('form');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      firstname = document.getElementById('firstname').value;
      lastname = document.getElementById('lastname').value;
      email = document.getElementById('email').value;
      Ios = document.getElementById('Ios').value;
      phno = document.getElementById('phno').value;
      help = document.getElementById('help').value;
      foodpref = document.getElementById('foodpref').value;
      maceianCls = document.getElementById('maceian-cls').value;
      name = firstname + " " + lastname;
      if (maceianCls.trim() == "") {
        maceianCls = "NA";
      }
      var data = {
        "name": name,
        "mailid": email,
        "phno": phno,
        "institute": Ios,
        "question": help,
        "cls": maceianCls,
      }
      
      
      // let razorpayorderid = " ";
      // console.log(data);
      let res = await axios.post("https://tedx22-backend.onrender.com/api/part/save", data);
      console.log("ok")
      // let res = await axios.post("http://localhost:3000/api/part/save", data);
      console.log(res);
      const razorpayorderid = res.data.data.razorpayorderid;

      
      // const razorpayorderid= "order_KlABEmD3D1PwTd";
      // axios.post('http://localhost:3000/api/part/save', data)
      // .then(res => {
      //   razorpayorderid = res.data.data.razorpayorderid;
      // })
      // .catch(err => console.log(err))
      if (res.data.data.duplicate) {
        alert("you have already registered")
      }



      var options = {
        "key": "rzp_live_mwoF5pqpHqFU8Z", // Enter the Key ID generated from the Dashboard
        "amount": "150000", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
        "currency": "INR",
        "name": "TEDxMACE",
        "description": "TEDxMACE",
        "order_id": razorpayorderid, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
        // "callback_url": "https://eneqd3r9zrjok.x.pipedream.net/",
        "prefill": {
          "name": res.data.data.name,
          "email": res.data.data.mailid,
          "contact": res.data.data.phno
        },
        // "notes": {
        //     "address": "Razorpay Corporate Office"
        // },
      }
      var rzp1 = await new Razorpay(options);
      rzp1.open();
      rzp1.on('payment.captured', function (response) {
        console.log(response);
        console.log('PAYMENT CONFIRMED');
        alert("Payment Confirmed");
      });
      rzp1.on('order.paid', function (response) {
        console.log(response);
        console.log('PAYMENT CONFIRMED');

      });

      

      
    });

    function myFunction() {
      var checkBox = document.getElementById("myCheck");
      var text = document.getElementById("text");
      if (checkBox.checked == true){
        text.style.display = "block";
      } else {
        text.style.display = "none";
      }
    }
    
  </script>

</body>

</html>
